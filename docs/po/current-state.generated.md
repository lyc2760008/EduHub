<!-- Generated by scripts/generate-current-state.mjs at 2026-02-10T20:42:57.327Z. -->
# EduHub Current State Snapshot (Generated)

Generated at: 2026-02-10T20:42:57.327Z

## App Directories
- src/app

## Route Scan
| Type | Route Path | Groups | File |
| --- | --- | --- | --- |
| layout | / | none | src/app/layout.tsx |
| page | / | none | src/app/page.tsx |
| layout | /[tenant] | admin | src/app/[tenant]/(admin)/layout.tsx |
| page | /[tenant]/admin | admin | src/app/[tenant]/(admin)/admin/page.tsx |
| page | /[tenant]/admin/audit | admin | src/app/[tenant]/(admin)/admin/audit/page.tsx |
| page | /[tenant]/admin/catalog | admin | src/app/[tenant]/(admin)/admin/catalog/page.tsx |
| page | /[tenant]/admin/centers | admin | src/app/[tenant]/(admin)/admin/centers/page.tsx |
| page | /[tenant]/admin/groups | admin | src/app/[tenant]/(admin)/admin/groups/page.tsx |
| page | /[tenant]/admin/groups/[id] | admin | src/app/[tenant]/(admin)/admin/groups/[id]/page.tsx |
| page | /[tenant]/admin/help | admin | src/app/[tenant]/(admin)/admin/help/page.tsx |
| page | /[tenant]/admin/levels | admin | src/app/[tenant]/(admin)/admin/levels/page.tsx |
| page | /[tenant]/admin/parents | admin | src/app/[tenant]/(admin)/admin/parents/page.tsx |
| page | /[tenant]/admin/programs | admin | src/app/[tenant]/(admin)/admin/programs/page.tsx |
| page | /[tenant]/admin/reports | admin | src/app/[tenant]/(admin)/admin/reports/page.tsx |
| page | /[tenant]/admin/reports/absence-requests | admin | src/app/[tenant]/(admin)/admin/reports/absence-requests/page.tsx |
| page | /[tenant]/admin/reports/attendance-summary | admin | src/app/[tenant]/(admin)/admin/reports/attendance-summary/page.tsx |
| page | /[tenant]/admin/reports/students-directory | admin | src/app/[tenant]/(admin)/admin/reports/students-directory/page.tsx |
| page | /[tenant]/admin/reports/tutor-workload | admin | src/app/[tenant]/(admin)/admin/reports/tutor-workload/page.tsx |
| page | /[tenant]/admin/reports/upcoming-sessions | admin | src/app/[tenant]/(admin)/admin/reports/upcoming-sessions/page.tsx |
| page | /[tenant]/admin/requests | admin | src/app/[tenant]/(admin)/admin/requests/page.tsx |
| page | /[tenant]/admin/sessions | admin | src/app/[tenant]/(admin)/admin/sessions/page.tsx |
| page | /[tenant]/admin/sessions/[id] | admin | src/app/[tenant]/(admin)/admin/sessions/[id]/page.tsx |
| page | /[tenant]/admin/students | admin | src/app/[tenant]/(admin)/admin/students/page.tsx |
| page | /[tenant]/admin/students/[id] | admin | src/app/[tenant]/(admin)/admin/students/[id]/page.tsx |
| page | /[tenant]/admin/subjects | admin | src/app/[tenant]/(admin)/admin/subjects/page.tsx |
| page | /[tenant]/admin/users | admin | src/app/[tenant]/(admin)/admin/users/page.tsx |
| route | /[tenant]/api/parent-auth/magic-link/consume | api, auth | src/app/[tenant]/api/parent-auth/magic-link/consume/route.ts |
| route | /[tenant]/api/parent-auth/magic-link/request | api, auth | src/app/[tenant]/api/parent-auth/magic-link/request/route.ts |
| page | /[tenant]/login | auth | src/app/[tenant]/login/page.tsx |
| layout | /[tenant]/parent | parent | src/app/[tenant]/(parent)/parent/layout.tsx |
| page | /[tenant]/parent | parent | src/app/[tenant]/(parent)/parent/page.tsx |
| page | /[tenant]/parent/auth/verify | auth, parent | src/app/[tenant]/(parent-auth)/parent/auth/verify/page.tsx |
| page | /[tenant]/parent/login | auth, parent | src/app/[tenant]/(parent-auth)/parent/login/page.tsx |
| layout | /[tenant]/portal | parent | src/app/[tenant]/(parent)/portal/layout.tsx |
| page | /[tenant]/portal | parent | src/app/[tenant]/(parent)/portal/page.tsx |
| page | /[tenant]/portal/account | parent | src/app/[tenant]/(parent)/portal/account/page.tsx |
| page | /[tenant]/portal/help | parent | src/app/[tenant]/(parent)/portal/help/page.tsx |
| page | /[tenant]/portal/requests | parent | src/app/[tenant]/(parent)/portal/requests/page.tsx |
| page | /[tenant]/portal/sessions | parent | src/app/[tenant]/(parent)/portal/sessions/page.tsx |
| page | /[tenant]/portal/sessions/[id] | parent | src/app/[tenant]/(parent)/portal/sessions/[id]/page.tsx |
| page | /[tenant]/portal/students | parent | src/app/[tenant]/(parent)/portal/students/page.tsx |
| page | /[tenant]/portal/students/[id] | parent | src/app/[tenant]/(parent)/portal/students/[id]/page.tsx |
| route | /api/__debug/sentry-test | api | src/app/api/__debug/sentry-test/route.ts |
| route | /api/admin/audit | admin, api | src/app/api/admin/audit/route.ts |
| route | /api/admin/audit/[id] | admin, api | src/app/api/admin/audit/[id]/route.ts |
| route | /api/admin/reports/[reportId] | admin, api | src/app/api/admin/reports/[reportId]/route.ts |
| route | /api/admin/reports/[reportId]/export | admin, api | src/app/api/admin/reports/[reportId]/export/route.ts |
| route | /api/admin/reports/absence-requests | admin, api | src/app/api/admin/reports/absence-requests/route.ts |
| route | /api/admin/reports/attendance-summary | admin, api | src/app/api/admin/reports/attendance-summary/route.ts |
| route | /api/admin/reports/students-directory | admin, api | src/app/api/admin/reports/students-directory/route.ts |
| route | /api/admin/reports/tutor-workload | admin, api | src/app/api/admin/reports/tutor-workload/route.ts |
| route | /api/admin/reports/upcoming-sessions | admin, api | src/app/api/admin/reports/upcoming-sessions/route.ts |
| route | /api/admin/students/[id]/invite-copied | admin, api | src/app/api/admin/students/[id]/invite-copied/route.ts |
| route | /api/admin/students/[id]/invite-data | admin, api | src/app/api/admin/students/[id]/invite-data/route.ts |
| route | /api/attendance/suggestion | api | src/app/api/attendance/suggestion/route.ts |
| route | /api/auth/[...nextauth] | api, auth | src/app/api/auth/[...nextauth]/route.ts |
| route | /api/centers | api | src/app/api/centers/route.ts |
| route | /api/centers/[id] | api | src/app/api/centers/[id]/route.ts |
| route | /api/debug/sentry-test | api | src/app/api/debug/sentry-test/route.ts |
| route | /api/groups | api | src/app/api/groups/route.ts |
| route | /api/groups/[id] | api | src/app/api/groups/[id]/route.ts |
| route | /api/groups/[id]/students | api | src/app/api/groups/[id]/students/route.ts |
| route | /api/groups/[id]/tutors | api | src/app/api/groups/[id]/tutors/route.ts |
| route | /api/health | api | src/app/api/health/route.ts |
| route | /api/levels | api | src/app/api/levels/route.ts |
| route | /api/levels/[id] | api | src/app/api/levels/[id]/route.ts |
| route | /api/me | api | src/app/api/me/route.ts |
| route | /api/parents | api | src/app/api/parents/route.ts |
| route | /api/parents/[parentId] | api | src/app/api/parents/[parentId]/route.ts |
| route | /api/parents/[parentId]/send-magic-link | api | src/app/api/parents/[parentId]/send-magic-link/route.ts |
| route | /api/portal/attendance | api, parent | src/app/api/portal/attendance/route.ts |
| route | /api/portal/me | api, parent | src/app/api/portal/me/route.ts |
| route | /api/portal/onboarding/dismiss | api, parent | src/app/api/portal/onboarding/dismiss/route.ts |
| route | /api/portal/requests | api, parent | src/app/api/portal/requests/route.ts |
| route | /api/portal/requests/[id]/resubmit | api, parent | src/app/api/portal/requests/[id]/resubmit/route.ts |
| route | /api/portal/requests/[id]/withdraw | api, parent | src/app/api/portal/requests/[id]/withdraw/route.ts |
| route | /api/portal/sessions | api, parent | src/app/api/portal/sessions/route.ts |
| route | /api/portal/sessions/[id] | api, parent | src/app/api/portal/sessions/[id]/route.ts |
| route | /api/portal/students | api, parent | src/app/api/portal/students/route.ts |
| route | /api/portal/students/[id] | api, parent | src/app/api/portal/students/[id]/route.ts |
| route | /api/programs | api | src/app/api/programs/route.ts |
| route | /api/programs/[id] | api | src/app/api/programs/[id]/route.ts |
| route | /api/reports/student-activity | api | src/app/api/reports/student-activity/route.ts |
| route | /api/reports/upcoming-sessions | api | src/app/api/reports/upcoming-sessions/route.ts |
| route | /api/reports/weekly-attendance | api | src/app/api/reports/weekly-attendance/route.ts |
| route | /api/requests | api | src/app/api/requests/route.ts |
| route | /api/requests/[id]/resolve | api | src/app/api/requests/[id]/resolve/route.ts |
| route | /api/sessions | api | src/app/api/sessions/route.ts |
| route | /api/sessions/[id] | api | src/app/api/sessions/[id]/route.ts |
| route | /api/sessions/[id]/attendance | api | src/app/api/sessions/[id]/attendance/route.ts |
| route | /api/sessions/[id]/notes | api | src/app/api/sessions/[id]/notes/route.ts |
| route | /api/sessions/generate | api | src/app/api/sessions/generate/route.ts |
| route | /api/students | api | src/app/api/students/route.ts |
| route | /api/students/[studentId] | api | src/app/api/students/[studentId]/route.ts |
| route | /api/students/[studentId]/parents | api | src/app/api/students/[studentId]/parents/route.ts |
| route | /api/students/[studentId]/parents/[parentId] | api | src/app/api/students/[studentId]/parents/[parentId]/route.ts |
| route | /api/students/[studentId]/parents/create | api | src/app/api/students/[studentId]/parents/create/route.ts |
| route | /api/subjects | api | src/app/api/subjects/route.ts |
| route | /api/subjects/[id] | api | src/app/api/subjects/[id]/route.ts |
| route | /api/tenant | api | src/app/api/tenant/route.ts |
| route | /api/users | api | src/app/api/users/route.ts |
| route | /api/users/[id] | api | src/app/api/users/[id]/route.ts |

## Nav Sources (Keyword Scan)
| File | Keywords |
| --- | --- |
| src/app/[tenant]/(admin)/admin/catalog/page.tsx | navigation |
| src/app/[tenant]/(admin)/layout.tsx | AdminShell, navigation |
| src/app/[tenant]/(parent-auth)/parent/auth/verify/page.tsx | ParentShell, navigation |
| src/app/[tenant]/(parent-auth)/parent/login/page.tsx | ParentShell |
| src/app/[tenant]/(parent)/parent/layout.tsx | ParentShell, navigation |
| src/app/[tenant]/(parent)/portal/layout.tsx | ParentShell, navigation |
| src/app/[tenant]/(parent)/portal/page.tsx | navigation |
| src/app/[tenant]/(parent)/portal/requests/page.tsx | navigation |
| src/app/[tenant]/(parent)/portal/sessions/[id]/page.tsx | navigation |
| src/app/[tenant]/(parent)/portal/sessions/page.tsx | navigation |
| src/app/[tenant]/(parent)/portal/students/[id]/page.tsx | navigation |
| src/app/[tenant]/(parent)/portal/students/page.tsx | navigation |
| src/app/[tenant]/login/page.tsx | navigation |
| src/components/admin/AdminNav.tsx | navigation |
| src/components/admin/groups/GroupsClient.tsx | navigation |
| src/components/admin/parents/ParentsClient.tsx | navigation |
| src/components/admin/sessions/SessionGeneratorModal.tsx | navigation |
| src/components/admin/shared/AdminAccessGate.tsx | navigation |
| src/components/admin/shell/AdminShell.tsx | AdminShell, sidebar, navigation |
| src/components/admin/students/StudentDetailClient.tsx | navigation |
| src/components/parent/ParentShell.tsx | ParentShell, navigation |
| src/components/parent/portal/PortalMeProvider.tsx | navigation |
| src/components/parent/PortalTopNav.tsx | navItems, navigation |
| src/lib/admin-table/useAdminTableQueryState.ts | navigation |
| src/lib/nav/adminNavTree.ts | sidebar, navigation |

## Nav Items (Best-Effort)
| Source | LabelKey/Id | Href |
| --- | --- | --- |
| src/lib/nav/adminNavTree.ts | admin.nav.dashboard | /admin |
| src/lib/nav/adminNavTree.ts | admin.nav.students | /admin/students |
| src/lib/nav/adminNavTree.ts | admin.nav.parents | /admin/parents |
| src/lib/nav/adminNavTree.ts | admin.nav.staff | /admin/users |
| src/lib/nav/adminNavTree.ts | admin.nav.centers | /admin/centers |
| src/lib/nav/adminNavTree.ts | admin.nav.groups | /admin/groups |
| src/lib/nav/adminNavTree.ts | admin.nav.programs | /admin/programs |
| src/lib/nav/adminNavTree.ts | admin.nav.subjects | /admin/subjects |
| src/lib/nav/adminNavTree.ts | admin.nav.levels | /admin/levels |
| src/lib/nav/adminNavTree.ts | admin.nav.sessions | /admin/sessions |
| src/lib/nav/adminNavTree.ts | admin.nav.requests | /admin/requests |
| src/lib/nav/adminNavTree.ts | admin.nav.audit | /admin/audit |
| src/lib/nav/adminNavTree.ts | admin.nav.help | /admin/help |
| src/lib/nav/adminNavTree.ts | admin.nav.reportsHome | /admin/reports |
| src/lib/nav/adminNavTree.ts | admin.nav.report.upcomingSessions | /admin/reports/upcoming-sessions |
| src/lib/nav/adminNavTree.ts | admin.nav.report.attendanceSummary | /admin/reports/attendance-summary |
| src/lib/nav/adminNavTree.ts | admin.nav.report.absenceRequests | /admin/reports/absence-requests |
| src/lib/nav/adminNavTree.ts | admin.nav.report.tutorWorkload | /admin/reports/tutor-workload |
| src/lib/nav/adminNavTree.ts | admin.nav.report.studentsDirectory | /admin/reports/students-directory |

## Nav Notes
- No duplicates detected by the scanner.

## Prisma Models (tenantId presence)
| Model | Has tenantId |
| --- | --- |
| Attendance | yes |
| AuditEvent | yes |
| AuthRateLimitEvent | yes |
| Center | yes |
| Group | yes |
| GroupStudent | yes |
| GroupTutor | yes |
| Level | yes |
| Parent | yes |
| ParentMagicLinkToken | yes |
| ParentRequest | yes |
| Program | yes |
| Session | yes |
| SessionNote | yes |
| SessionStudent | yes |
| StaffCenter | yes |
| Student | yes |
| StudentParent | yes |
| Subject | yes |
| Tenant | no |
| TenantMembership | yes |
| User | no |

## Playwright Tests
- tests/e2e/admin/absence-request-admin-resolve.spec.ts
- tests/e2e/admin/attendance.admin.spec.ts
- tests/e2e/admin/attendance.tutor-rbac.spec.ts
- tests/e2e/admin/audit-log-shows-absence-resolve.spec.ts
- tests/e2e/admin/audit-log-shows-access-code-reset.spec.ts
- tests/e2e/admin/auto-assist-correctness.spec.ts
- tests/e2e/admin/catalog.crud.spec.ts
- tests/e2e/admin/catalog.navigation.spec.ts
- tests/e2e/admin/catalog.security.spec.ts
- tests/e2e/admin/centers.admin.spec.ts
- tests/e2e/admin/centers.tutor-blocked.spec.ts
- tests/e2e/admin/dashboard.navigation.spec.ts
- tests/e2e/admin/groups.crud.spec.ts
- tests/e2e/admin/groups.security.spec.ts
- tests/e2e/admin/i18n-smoke-new-ui.spec.ts
- tests/e2e/admin/navigation/rbac.spec.ts
- tests/e2e/admin/navigation/sidebar.behavior.spec.ts
- tests/e2e/admin/notes.admin.spec.ts
- tests/e2e/admin/notes.tutor-rbac.spec.ts
- tests/e2e/admin/regression-admin-loop.spec.ts
- tests/e2e/admin/release.gate.spec.ts
- tests/e2e/admin/reports/csv-export.spec.ts
- tests/e2e/admin/reports/rbac.spec.ts
- tests/e2e/admin/reports/smoke.spec.ts
- tests/e2e/admin/reports/toolkit-state.spec.ts
- tests/e2e/admin/security-tenant-rbac.spec.ts
- tests/e2e/admin/sessions.generator.security.spec.ts
- tests/e2e/admin/sessions.generator.spec.ts
- tests/e2e/admin/sessions.generator.unit.spec.ts
- tests/e2e/admin/sessions.spec.ts
- tests/e2e/admin/staff-auto-assist-approved.spec.ts
- tests/e2e/admin/staff-auto-assist-pending-declined.spec.ts
- tests/e2e/admin/students.parent-link.spec.ts
- tests/e2e/admin/students.rbac.tutor.spec.ts
- tests/e2e/admin/students.regression-deps.spec.ts
- tests/e2e/admin/tenant-isolation-audit-log.spec.ts
- tests/e2e/admin/tutor-visibility-absence-requests.spec.ts
- tests/e2e/admin/tutor-write-permissions.spec.ts
- tests/e2e/admin/users.crud.spec.ts
- tests/e2e/admin/users.tutor-blocked.spec.ts
- tests/e2e/go-live/absence-lifecycle.go-live.spec.ts
- tests/e2e/go-live/admin-audit.go-live.spec.ts
- tests/e2e/go-live/auth-hardening.go-live.spec.ts
- tests/e2e/go-live/portal-navigation.go-live.spec.ts
- tests/e2e/go-live/rbac.go-live.spec.ts
- tests/e2e/golden/absence-lifecycle.golden.spec.ts
- tests/e2e/golden/parent-auth-hardening.golden.spec.ts
- tests/e2e/golden/portal-smoke.golden.spec.ts
- tests/e2e/golden/rbac.golden.spec.ts
- tests/e2e/portal/absence-request-access-control.spec.ts
- tests/e2e/portal/absence-request-duplicate-negative.spec.ts
- tests/e2e/portal/absence-request-i18n-smoke.spec.ts
- tests/e2e/portal/absence-request-parent-happy.spec.ts
- tests/e2e/portal/absence-request-parent-sees-resolved.spec.ts
- tests/e2e/portal/absence-request-tenant-isolation-smoke.spec.ts
- tests/e2e/portal/onboarding/parent-onboarding.spec.ts
- tests/e2e/portal/parent-auth-lockout.spec.ts
- tests/e2e/portal/parent-auth.backend.spec.ts
- tests/e2e/portal/parent-auth.spec.ts
- tests/e2e/portal/parent-auth.ui.spec.ts
- tests/e2e/portal/parent-visible-note.spec.ts
- tests/e2e/portal/parent.shell.smoke.spec.ts
- tests/e2e/portal/portal-access-control.spec.ts
- tests/e2e/portal/portal-empty-states.spec.ts
- tests/e2e/portal/portal-friendly-errors.spec.ts
- tests/e2e/portal/portal-i18n-account-help-smoke.spec.ts
- tests/e2e/portal/portal-i18n-smoke.spec.ts
- tests/e2e/portal/portal-linked-visibility.spec.ts
- tests/e2e/portal/portal-logout-blocks-access.spec.ts
- tests/e2e/portal/portal-my-requests.spec.ts
- tests/e2e/portal/portal-sorting-time-smoke.spec.ts
- tests/e2e/portal/portal-tenant-isolation.spec.ts
- tests/e2e/portal/portal-trust-header-and-pages.spec.ts
- tests/e2e/portal/rbac-and-tenant-isolation.spec.ts
- tests/e2e/portal/rbac-parent-cannot-access-audit.spec.ts
- tests/e2e/portal/rbac-parent-cannot-access-staff.spec.ts
- tests/e2e/portal/resubmit-flow.spec.ts
- tests/e2e/portal/session-detail-access-control.spec.ts
- tests/e2e/portal/session-detail-i18n-smoke.spec.ts
- tests/e2e/portal/staff-absence-tenant-isolation-smoke.spec.ts
- tests/e2e/portal/withdraw-happy-path.spec.ts
- tests/e2e/portal/withdraw-restrictions.spec.ts
- tests/e2e/smoke/catalog.programs.smoke.spec.ts
- tests/e2e/smoke/groups.smoke.spec.ts
- tests/e2e/smoke/parent-auth.smoke.spec.ts
- tests/e2e/smoke/users.smoke.spec.ts

## Env Var Names (from .env.example)
- APP_ENV
- AUTH_RATE_LIMIT_EMAIL_MAX
- AUTH_RATE_LIMIT_EMAIL_WINDOW_MINUTES
- AUTH_RATE_LIMIT_IP_MAX
- AUTH_RATE_LIMIT_IP_WINDOW_MINUTES
- AUTH_SECRET
- AUTH_URL
- BASELINE_BROWSER_MAPPING_IGNORE_OLD_DATA
- BROWSERSLIST_IGNORE_OLD_DATA
- DATABASE_URL
- E2E_ADMIN_EMAIL
- E2E_ADMIN_PASSWORD
- E2E_BASE_URL
- E2E_RUN_ID
- E2E_TENANT_SLUG
- E2E_TUTOR_EMAIL
- E2E_TUTOR_PASSWORD
- EMAIL_FROM
- MAGIC_LINK_TTL_MINUTES
- NEXTAUTH_SECRET
- NEXTAUTH_URL
- NODE_ENV
- PORT
- SEED_ACME_OWNER_EMAIL
- SEED_ACME_OWNER_NAME
- SEED_ACME_OWNER_PASSWORD
- SEED_DEFAULT_PASSWORD
- SEED_DEMO_TENANT_NAME
- SEED_DEMO_TENANT_SLUG
- SEED_OWNER_EMAIL
- SEED_OWNER_NAME
- SEED_OWNER_PASSWORD
- SEED_PARENT_EMAIL
- SEED_PARENT_NAME
- SEED_PARENT_PASSWORD
- SEED_SECOND_TENANT_NAME
- SEED_SECOND_TENANT_SLUG
- SEED_TUTOR_EMAIL
- SEED_TUTOR_NAME
- SEED_TUTOR_PASSWORD
- SMTP_HOST
- SMTP_PASSWORD
- SMTP_PORT
- SMTP_SECURE
- SMTP_USER
- TENANT_BASE_DOMAIN
- TENANT_DEV_BASE_DOMAIN

## TODO: Manual Follow-ups
- Validate route descriptions, access control summaries, and i18n status.
- Confirm nav labels and any duplicate/ambiguous items.
- Verify test coverage summaries for PO planning.
